@inject NavigationManager navManager

@if (Mode == DetModes.View)
{
    @if (Entity != null)
    {
        <div class="row">
            <div class="col-9">
                <h1>@Entity.Term</h1>
                <p>@Entity.Meaning</p>
            </div>
            <div class="col-3 text-md-end">
                <p class="m-3">@((MemoTypes)Entity.TypeId)</p>
                <p class="m-3">@Entity.FullInfoStatus</p>
                <p class="m-3">@Entity.StudyStatus</p>
            </div>
        </div>
        <img src="@Entity.Image"/>
        <div class="row">
            <MarkdownRenderer MarkdownContent=@Entity.Info/>
        </div>
    }
}
else if (Mode == DetModes.GridView)
{
    if (Entity != null)
    {
        <tr @onclick="(e => GoToMemo(Entity))">
            <td>@Entity.Term</td>
            <td>@Entity.Meaning</td>
            <td>
                @if (DisplayButtons)
                {
                    <button class="btn btn-danger" @onclick="(e => Delete.InvokeAsync(Entity))">Delete</button>
                }
            </td>
        </tr>
    }
}

@code {
    [Parameter] public Memo? Entity { get; set; }
    [Parameter] public DetModes Mode { get; set; }
    [Parameter] public bool DisplayButtons { get; set; }
    [Parameter] public EventCallback<Memo> Delete { get; set; }

    void GoToMemo(Memo memo)
    {
        navManager.NavigateTo($"/memos/{memo.Id}");
    }
}
